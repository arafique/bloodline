!function(){window.Bloodline=Ember.Application.create()}(),function(){Bloodline.ApplicationRoute=Ember.Route.extend({model:function(){return["Dashboard","myBloodline","Blood Shoute","About"]}})}(),function(){Bloodline.AuthenticatedRoute=Ember.Route.extend({beforeModel:function(a){console.log("AuthenticatedRoute.beforeModel: Start");var b=this;FB.getLoginStatus(function(c){console.log(c.status),"connected"!=c.status&&b.redirectToLogin(a)}),console.log("AuthenticatedRoute.beforeModel: End")},redirectToLogin:function(a){console.log(a),console.log("redirectToLogin:You must login first");var b=this.controllerFor("login");b.set("attemptedTransition",a),this.transitionTo("login")}})}(),function(){Bloodline.IndexRoute=Bloodline.AuthenticatedRoute.extend({model:function(){FB.api("/me",function(a){return alert(a.name),a})}})}(),function(){Bloodline.LoginRoute=Ember.Route.extend({})}(),function(){Bloodline.IndexController=Ember.ArrayController.extend({})}(),function(){Bloodline.LoginController=Ember.Controller.extend({login:function(){console.log("LoginController:login");var a=this;FB.login(function(b){console.log(b),console.log("Login call response: %s",b.authResponse),b.authResponse?a.onSuccess():alert("Login Failed")})},onSuccess:function(){console.log("LoginController.onSuccess");var a=this,b=this.get("attemptedTransition");b?(console.log("Retrying attemptedTransition"),b.retry(),a.set("attemptedTransition",null)):a.transitionToRoute("index")}})}(),function(){Bloodline.Router.map(function(){this.route("login")})}(),function(){window.fbAsyncInit=function(){FB.init({appId:"251886514950708",channelUrl:window.location.protocol+"//"+window.location.host+"/channel.html",status:!0,cookie:!0,xfbml:!0}),FB.Event.subscribe("auth.authResponseChange",function(a){"connected"===a.status||("not_authorized"===a.status?FB.login():FB.login())})},function(a){var b,c="facebook-jssdk",d=a.getElementsByTagName("script")[0];a.getElementById(c)||(b=a.createElement("script"),b.id=c,b.async=!0,b.src="//connect.facebook.net/en_US/all.js",d.parentNode.insertBefore(b,d))}(document)}();